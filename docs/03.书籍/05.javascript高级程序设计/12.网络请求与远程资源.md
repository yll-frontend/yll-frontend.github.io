---
title: 网络请求与远程资源
date: 2021-12-07 08:08:21
permalink: /pages/90421b/
categories:
  - 书籍
  - javascript高级程序设计
tags:
  - 
---
# 网络请求与远程资源

## `XMLHttpRequest` 对象

### 使用

```js
  let xhr = new XMLHttpRequest();
  xhr.open("get", "example.php", false);
  xhr.send(null)
  if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304) {
    alert(xhr.responseText);
  } else {
    alert("Request was unsuccessful: " + xhr.status);
  }
```

### http头部

+ `Accept`:浏览器可以处理的内容类型。
+ `Accept-Charset`:浏览器可以显示的字符集。
+ `Accept-Encoding`:浏览器可以处理的压缩编码类型。
+ `Accept-Language`:浏览器使用的语言。
+ `Connection`:浏览器与服务器的连接类型。
+ `Cookie`:页面中设置的 Cookie。
+ `Host`:发送请求的页面所在的域。
+ `Referer`:发送请求的页面的 URI。**注意，这个字段在HTTP规范中就拼错了，所以考虑到兼容性也必须将错就错。(正确的拼写应该是 Referrer。)**
 + User-Agent:浏览器的用户代理字符串。
虽然不同浏览器发送的确切头部字段可能各不相同，但这些通常都是会发送的。如果需要发送额外的请求头部，可以使用 setRequestHeader()方法。这个方法接收两个参数:头部字段的名称和值。 为保证请求头部被发送，必须在 open()之后、send()之前调用 setRequestHeader()，如下面的例子所示:

```js
  let xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
          if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304) {
            alert(xhr.responseText);
          } else {
            alert("Request was unsuccessful: " + xhr.status);
          }
  } };
  xhr.open("get", "example.php", true);
  xhr.setRequestHeader("MyHeader", "MyValue");
  xhr.send(null);
```

## 进度事件

## 跨域资源共享

## 替代性跨源技术

## Fetch API

## Beacon API

## Web Socket

## 小结
