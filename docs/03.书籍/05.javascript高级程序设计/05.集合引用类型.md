---
title: é›†åˆå¼•ç”¨ç±»å‹
date: 2021-07-23 06:43:16
permalink: /pages/40542a/
categories:
  - ä¹¦ç±
  - javascripté«˜çº§ç¨‹åºè®¾è®¡
sticky: 1
tags:
  - 
---
# é›†åˆå¼•ç”¨ç±»å‹

## Object

```js
function displayInfo(args) {
  let output = "";
           
  if (typeof args.name == "string"){
    output += "Name: " + args.name + "\n";
  }
           
  if (typeof args.age == "number") {
    output += "Age: " + args.age + "\n";
  }
           
  alert(output);
}
           
displayInfo({ 
  name: "Nicholas", 
  age: 29
});
           
displayInfo({
  name: "Greg"
});
```

:::tip
è¿™ç§æ¨¡å¼é€‚ç”¨äºæœ‰å¤§é‡å‚æ•°å¯é€‰çš„æƒ…å†µä¸‹ã€‚é€šè¿‡å¯¹å¿…é€‰å‚æ•°è¿›è¡Œå‘½åï¼Œå†é€šè¿‡å¯¹ä¸€ä¸ªå¯¹è±¡å­—é¢é‡å°è£…å¤šä¸ªå¯é€‰å‚æ•°ã€‚
:::

å¯ä»¥é€šè¿‡ä¸­æ‹¬å·æ¥å­˜å–å±æ€§ï¼š

```js
let propertyName = "name";
alert(person[propertyName]);  // "Nicholas"

person["first name"] = "Nicholas"; //æŠ¥é”™
```

## Array

ECMAScriptæ•°ç»„æ˜¯åŠ¨æ€å¤§å°çš„ï¼Œä¼šä¼´éšç€æ•°æ®æ·»åŠ è€Œè‡ªåŠ¨å¢é•¿ã€‚

### åˆ›å»ºæ•°ç»„

+ ä½¿ç”¨Arrayæ„é€ å‡½æ•°

  ```js
  let colors = new Array();

  let colors = new Array(20);

  let colors = new Array("red", "blue", "green");

  let colors = new Array(3);     
  let names = new Array("Greg");  
  ```

+ ä½¿ç”¨æ•°ç»„å­—é¢é‡

  ```js
  let colors = ["red", "blue", "green"];  // Creates an array with three strings
  let names = [];                         // Creates an empty array
  let values = [1,2,];                    // Creates an array with 2 items
  ```

  :::tip
  ä¸å¯¹è±¡å­—é¢é‡ä¸€æ ·ï¼Œä½¿ç”¨æ•°ç»„å­—é¢é‡åˆ›å»ºæ•°ç»„æ—¶ï¼Œä¸ä¼šè°ƒç”¨Arrayæ„é€ å‡½æ•°
  :::

  + `from()å’Œof()`

    + Arrayæ„é€ å‡½æ•°è¿˜æœ‰ä¸¤ä¸ªES6æ–°å¢çš„ç”¨äºåˆ›å»ºæ•°ç»„çš„é™æ€æ–¹æ³•ï¼š`form()å’Œof()`,`form()`ç”¨äºå°†ç±»æ•°ç»„è½¬æ¢ä¸ºæ•°ç»„,`of()`ç”¨äºå°†ä¸€ç»„å‚æ•°è½¬æ¢ä¸ºæ•°ç»„å®ä¾‹
    + `Array.from()`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå³å«æœ‰`length`å±æ€§å’Œå¯ç´¢å¼•å…ƒç´ çš„ç»“æ„

      ```js
      //å­—ç¬¦ä¸²ä¼šè¢«æ‹†åˆ†ä¸ºå•å­—ç¬¦æ•°ç»„
      alert(Array.from("Matt"));  // ["M", "a", "t", "t"]

      // å°†é›†åˆå’Œæ˜ å°„è½¬æ¢ä¸ºæ–°æ•°ç»„
      const m = new Map().set(1, 2)
                        .set(3, 4);
      const s = new Set().add(1)
                        .add(2)
                        .add(3)
                        .add(4);

      alert(Array.from(m));  // [[1, 2], [3, 4]]
      alert(Array.from(s));  // [1, 2, 3, 4] 

      // æµ…å¤åˆ¶
      const a1 = [1, 2, 3, 4]; 
      const a2 = Array.from(a1);
      alert(a1);         // [1, 2, 3, 4] 
      alert(a1 === a2);  // false


      // å¯ä»¥ä½¿ç”¨ä»»ä½•å¯è¿­ä»£å¯¹è±¡
      const iter = {
        *[Symbol.iterator]() {
          yield 1;
          yield 2; 
          yield 3;
          yield 4;

        }
      };
      alert(Array.from(iter));  // [1, 2, 3, 4]

      //  argumentså¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„
      function getArgsArray() {
        return Array.from(arguments);
      }
      alert(getArgsArray(1, 2, 3, 4));  // [1, 2, 3, 4]
      ```

      + `of()`ç”¨æ¥æ›¿ä»£`Array.prototype.slice.call(arguments)`,å°†argumentså¯¹è±¡æŠ“æ¢ä¸ºæ•°ç»„çš„æ–¹æ³•

### æ•°ç»„ç©ºä½

ä½¿ç”¨æ•°ç»„å­—é¢é‡åˆ›å»ºæ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸²é€—å·æ¥åˆ›å»º**ç©ºä½**ã€‚ECMAScriptä¼šå°†ç›¸åº”ç´¢å¼•ä½ç½®çš„å€¼å½“æˆç©ºä½ã€‚

```js
const options = [1,,,,5];

for (const option of options) {
  alert(option === undefined);
}
// false
// true
// true
// true
// false

const a = Array.from([,,,]);  // Array of 3 holes created with ES6's Array.from()
for (const val of a) {
  alert(val === undefined);
}
// true
// true
// true

alert(Array.of(...[,,,]));  // [undefined, undefined, undefined]

for (const [index, value] of options.entries()) {
  alert(value);
}
// 1
// undefined
// undefined
// undefined
// 5 

```

:::tip
å°½é‡é¿å…ä½¿ç”¨æ•°ç»„ç©ºä½ï¼Œå¯ä»¥ä½¿ç”¨æ˜¾ç¤ºçš„`undefined`ä»£æ›¿
:::

### æ•°ç»„ç´¢å¼•

æ•°ç»„lengthä¸æ˜¯åªè¯»çš„ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹æ•°ç»„lengthï¼Œä»**æ•°ç»„æœ«å°¾**åˆ é™¤æˆ–è€…æ·»åŠ å…ƒç´ 
:::tip
æ•°ç»„æœ€å¤šå¯ä»¥åŒ…å«4 294 967 295ä¸ªå…ƒç´ ï¼
:::

### å¤åˆ¶å’Œå¡«å……æ•°ç»„

+ `fill()`:å¯ä»¥å‘ä¸€ä¸ªå·²æœ‰æ•°ç»„æ’å…¥å…¨éƒ¨æˆ–éƒ¨åˆ†ç›¸åŒçš„å€¼ã€‚å¼€å§‹ç´¢å¼•ç”¨äºæŒ‡å®šå¼€å§‹å¡«å……çš„ä½ç½®ï¼Œæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚å¦‚æœä¸æä¾›ç»“æŸç´¢å¼•ï¼Œåˆ™ä¸€ç›´å¡«å……è‡³æ•°ç»„æœ«å°¾ã€‚è´Ÿå€¼ç´¢å¼•å°†ä»æ•°ç»„æœ«å°¾å¼€å§‹è®¡ç®—ã€‚åŒ…å«å¼€å§‹ç´¢å¼•ï¼Œä¸åŒ…æ‹¬ç»“æŸç´¢å¼•ã€‚

    ```js
    const zeroes = [0, 0, 0, 0, 0];

    // ç”¨5å¡«å……æ•´ä¸ªæ•°ç»„
    zeroes.fill(5);
    alert(zeroes);   // [5, 5, 5, 5, 5]
    zeroes.fill(0);  // reset

    // ç”¨6å¡«å……ç´¢å¼•å¤§äº3çš„å…ƒç´ 
    zeroes.fill(6, 3);
    alert(zeroes);   // [0, 0, 0, 6, 6]
    zeroes.fill(0);  // reset

    // ç”¨7å¡«å……ç´¢å¼•å¤§äº1å°äº3çš„å…ƒç´ 
    zeroes.fill(7, 1, 3);
    alert(zeroes);   // [0, 7, 7, 0, 0]; 
    zeroes.fill(0);  // reset
    ```

    **`fill()`å¿½ç•¥ç´¢å¼•è¶…å‡ºæ•°ç»„è¾¹ç•Œã€é›¶é•¿åº¦ã€ä»¥åŠæ–¹å‘ç›¸åçš„ç´¢å¼•èŒƒå›´**

    ```js
    //ç´¢å¼•è¿‡ä½ï¼Œå¿½ç•¥
    zeroes.fill(1, -10, -6);
    alert(zeroes);   // [0, 0, 0, 0, 0]

    // è¿‡é«˜ï¼Œå¿½ç•¥
    zeroes.fill(1, 10, 15);
    alert(zeroes);   // [0, 0, 0, 0, 0]

    // ç´¢å¼•éƒ¨åˆ†å¯ç”¨ï¼Œå¡«å……å¯ç”¨éƒ¨åˆ†
    zeroes.fill(4, 3, 10)
    alert(zeroes);   // [0, 0, 0, 4, 4]
    ```

+ `copyWithin()`:æŒ‰ç…§æŒ‡å®šèŒƒå›´æµ…å¤åˆ¶æ•°ç»„ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œç„¶åå°†ä»–ä»¬æ’å…¥åˆ°æŒ‡å®šç´¢å¼•å¼€å§‹çš„ä½ç½®ã€‚ç´¢å¼•çš„è§„åˆ™åŒ`fill()`æ–¹æ³•

  ```js
  let ints,
      reset = () => ints = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
  reset();

  
  //ä»intsä¸­å¤åˆ¶ç´¢å¼•0å¼€å§‹çš„å†…å®¹ï¼Œæ’å…¥åˆ°5å¼€å§‹çš„ä½ç½®
  ints.copyWithin(5);
  alert(ints);  // [0, 1, 2, 3, 4, 0, 1, 2, 3, 4]
  reset();

  //ä»intsä¸­å¤åˆ¶ç´¢å¼•5å¼€å§‹çš„å†…å®¹ï¼Œæ’å…¥åˆ°0å¼€å§‹çš„ä½ç½®
  ints.copyWithin(0, 5);
  alert(ints);  // [5, 6, 7, 8, 9, 5, 6, 7, 8, 9]
  reset();

  //ä»0å¼€å§‹åˆ°3ç»“æŸï¼Œæ’å…¥åˆ°4çš„ä½ç½®
  ints.copyWithin(4, 0, 3);
  alert(ints);  // [0, 1, 2, 3, 0, 1, 2, 7, 8, 9]
  reset();
  ```

### è½¬æ¢æ–¹æ³•

**æ¯ä¸ªå¯¹è±¡éƒ½æœ‰`toLocalString()`ã€`toString()`ã€`valueOf()`æ–¹æ³•**

+ æ•°ç»„çš„`valueOf()`è¿”å›æ•°ç»„æœ¬èº«
+ æ•°ç»„çš„`toString()`å°±æ˜¯å¯¹æ•°ç»„çš„æ¯ä¸ªå€¼è°ƒç”¨`toString()`ï¼Œå†ä»¥é€—å·æ‹¼æ¥å½¢æˆçš„æœ€ç»ˆå­—ç¬¦ä¸²
+ æ•°ç»„çš„`toLocalString()`å°±æ˜¯å¯¹æ•°ç»„çš„æ¯ä¸ªå€¼è°ƒç”¨`toLocalString()`ï¼Œå†ä»¥é€—å·æ‹¼æ¥å½¢æˆçš„æœ€ç»ˆå­—ç¬¦ä¸²
:::tip
å¦‚æœæ•°ç»„ä¸­çš„æŸä¸€é¡¹æ˜¯`null`æˆ–è€…`undefined`,åˆ™åœ¨`join()`ã€`toLocalString()`ã€`toString()`å’Œ`valueOf()`è¿”å›çš„ç»“æœä¸­ä»¥**ç©ºå­—ç¬¦ä¸²**è¡¨ç¤º
:::

### æ’åºæ–¹æ³•

+ `reverse()`å°†æ•°ç»„å…ƒç´ åå‘æ’åˆ—

    ```js
      let values = [0, 1, 5, 10, 15];
      values.reverse();
      console.log(values);//[15, 10, 5, 1, 0]
    ```

+ `sort()`å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åº
  é»˜è®¤æƒ…å†µä¸‹æŒ‰ç…§å‡åºæ’åˆ—ï¼Œå¯¹æ•°ç»„ä¸­çš„å…ƒç´ æ¯ä¸€é¡¹éƒ½è°ƒç”¨`toString()`æ–¹æ³•ï¼Œé€šè¿‡æ¯”è¾ƒå­—ç¬¦ä¸²æ¥å†³å®šé¡ºåºï¼Œ**å³ä½¿ç´ ç»„çš„è¢æœ¯éƒ½æ˜¯æ•°å€¼ï¼Œä¹Ÿä¼šè½¬æ¢æˆå­—ç¬¦å‡ºçº³æ¥æ¯”è¾ƒ**ï¼Œæ¯”å¦‚

    ```js
      let values = [0, 1, 5, 10, 15];
      values.sort();
      console.log(values);//[0, 1, 10, 15, 5]
    ```

  `sort()`æ–¹æ³•æ¥å—ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œæ¯”è¾ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°å‰é¢ï¼Œå°±è¿”å›è´Ÿå€¼ï¼Œ**å¦‚æœä¸¤ä¸ªå‚æ•°ç›¸åŒå°±è¿”å›0**ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°åé¢ï¼Œè¿”å›æ­£å€¼ã€‚

    ```js
      function compare(value1,value2) {
        if(value1 < value2) {
          return -1
        }else if(value1 > value2) {
          return 1
        }else {
          return 0
        }
      }
    ```

:::tip
`reverse()`å’Œ`sort()`éƒ½è¿”å›è°ƒç”¨ä»–ä»¬çš„æ•°ç»„çš„å¼•ç”¨
:::

### æ“ä½œæ–¹æ³•

+ `concat()`

  ```js
  let colors = ['green', 'yellow', 'blue'] 
  let colors2 = colors.concat("red", ['black', 'brown'])

  console.log(colors) //['green', 'yellow', 'blue'] 
  console.log(colors2) //['green', 'yellow', 'blue', 'red', 'black', 'brown'] 
  ```

  **æ‰“å¹³æ•°ç»„å‚æ•°çš„è¡Œä¸ºå¯ä»¥é‡å†™**ï¼Œæ–¹æ³•æ˜¯åœ¨å‚æ•°æ•°ç»„ä¸ŠæŒ‡å®šä¸€ä¸ªç‰¹æ®Šç¬¦å·:`Symbol.isConcatSpreadable`,å¦‚æœå§è¿™ä¸ªç¬¦å·çš„å€¼è®¾ä¸ºfalseï¼Œåˆ™é»˜è®¤ä¸å±•å¼€æ•°ç»„ï¼Œåä¹‹ï¼Œåˆ™å±•å¼€æ•°ç»„ã€‚

  ```js{10}
    let colors = ["red", "green", "blue"];
    let newColors = ["black", "brown"];
    let moreNewColors = {
      [Symbol.isConcatSpreadable]: true,
      length: 2,
      0: "pink",
      1: "cyan"
    };

    newColors[Symbol.isConcatSpreadable] = false;

    // ä¸å±•å¼€æ•°ç»„
    let colors2 = colors.concat("yellow", newColors);

    // å±•å¼€æ•°ç»„
    let colors3 = colors.concat(moreNewColors);
              
    alert(colors);   // ["red", "green","blue"]    
    alert(colors2);  // ["red", "green", "blue", "yellow", ["black", "brown"]] 
    alert(colors3);  // ["red", "green", "blue", "pink, "cyan"] 
  ```

+ `slice()`ç”¨äºåˆ›å»ºä¸€ä¸ªåŒ…å«åŸæ•°ç»„ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„æ–°æ•°ç»„ã€‚ä¸ä¼šå½±å“åŸæ•°ç»„
  :::tip
  å¦‚æœ`slice`å‚æ•°æœ‰è´Ÿå€¼ï¼Œå°±ä»¥æ•°ç»„çš„é•¿åº¦åŠ ä¸Šè´Ÿå€¼çš„ç»“æœç¡®å®šä½ç½®ã€‚æ¯”å¦‚åœ¨åŒ…å«5ä¸ªå…ƒç´ çš„æ•°ç»„ä¸Šè°ƒç”¨`slice(-2, -1)`ç›¸å½“äºè°ƒç”¨äº†`slice(3, 4)`,å¦‚æœç»“æŸä½ç½®å°äºå¼€å§‹ä½ç½®ï¼Œè¿”å›ç©ºæ•°ç»„
  :::

+ `splice()`
  + **åˆ é™¤**
  + **æ’å…¥**
  + **æ›¿æ¢**

### æœç´¢å’Œä½ç½®æ–¹æ³•

 æœç´¢æ•°ç»„çš„æ–¹æ³•åˆ†ä¸ºä¸¤ç§ï¼š**æŒ‰ä¸¥æ ¼ç›¸ç­‰æœç´¢**å’Œ**æŒ‰æ–­è¨€å‡½æ•°æœç´¢**

+ ä¸¥æ ¼ç›¸ç­‰æœç´¢,åœ¨æœç´¢æ—¶ä¼šè¿›è¡Œå…¨ç­‰æ¯”è¾ƒ(===)
  + `indexOf()`
  + `lastIndexOf()`
  + `includes()`
+ æ–­è¨€å‡½æ•°æœç´¢
  + `find()`
  + `findIndex()`

### è¿­ä»£æ–¹æ³•

æ¯ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä»¥æ¯ä¸€é¡¹ä¸ºå‚æ•°è¿è¡Œçš„å‡½æ•°ï¼Œä»¥åŠå¯é€‰çš„ä½œä¸ºå‡½æ•°ä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸå¯¹è±¡ã€‚å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°:æ•°ç»„å…ƒç´ ï¼Œå…ƒç´ ç´¢å¼•ï¼Œæ•°ç»„æœ¬èº«ã€‚

+ `every()`:å¯¹æ•°ç»„æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœéƒ½è¿”å›`true`ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›`true`
+ `some()`:å¯¹æ•°ç»„æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœæœ‰ä¸€é¡¹è¿”å›`true`ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å›`true`
+ `filter()`:å¯¹æ•°ç»„æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œè¿”å›`true`çš„é¡¹ä¼šç»„æˆæ•°ç»„ä¹‹åè¿”å›è¿™ä¸ªæ•°ç»„
+ `forEach()`:å¯¹æ•°ç»„æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼
+ `map()`:å¯¹æ•°ç»„æ¯ä¸€é¡¹è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œè¿”å›ç”±æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœç»„æˆçš„æ•°ç»„

### å½’å¹¶æ–¹æ³•

`reduce()`å’Œ`reduceRight()`è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå¯¹æ¯ä¸€é¡¹éƒ½ä¼šä¸è¿è¡Œçš„å½’å¹¶å‡½æ•°ï¼Œä»¥åŠå¯é€‰çš„ä»¥ä¹‹ä¸ºå½’å¹¶èµ·ç‚¹çš„åˆå§‹å€¼ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„è¿”å›å€¼éƒ½ä¼šä½œä¸ºä¸‹ä¸€æ¬¡è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚

```js
let values = [1, 2, 3, 4, 5];
let sum = values.reduce((prev, cur, index, array) => prev + cur);

alert(sum);  // 15
```

`riduceRight()`ä¸ä¹‹ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘å‘ç›¸åã€‚

```js
let values = [1, 2, 3, 4, 5];
let sum = values.reduceRight(function(prev, cur, index, array){
  return prev + cur;
});
alert(sum); // 15
```

åªæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨å½’å¹¶å‡½æ•°æ—¶`prev`æ˜¯5ï¼Œ`cur`æ˜¯4ã€‚
:::tip
ç©¶ç«Ÿæ˜¯ä½¿ç”¨`reduce()`è¿˜æ˜¯`reduceRight()`ï¼Œåªå–å†³äºéå†æ•°ç»„å…ƒç´ çš„æ–¹å‘
:::

## Map

+ `new Map()`
+ `get()`
+ `set()`
+ `entires()`
+ `has()`
+ `delete()`
+ `clear()`

`map`ä¸`object`çš„å·®å¼‚ï¼š

+ `object`åªèƒ½ä¸€æ•°å€¼ã€å­—ç¬¦ä¸²ã€ç¬¦å·ä½œä¸ºé”®ï¼Œ`map`å¯ä»¥ä½¿ç”¨ä»»ä½•JavaScriptç±»å‹ä½œä¸ºé”®
+ `map`ä¼šç»´æŠ¤é”®å€¼å¯¹çš„æ’å…¥é¡ºåº

### é€‰æ‹©Objectè¿˜æ˜¯Map

ä»ä»¥ä¸‹å‡ æ–¹é¢æ¥è€ƒè™‘ï¼š

+ å†…å­˜å ç”¨

  åœ¨å­˜å‚¨å•ä¸ªé”®å€¼å¯¹æ—¶æ‰€çš„å†…å­˜æ•°é‡éƒ½ä¼šéšé”®çš„æ•°é‡çº¿æ€§å¢åŠ ï¼Œä½†æ˜¯æ‰¹é‡æ·»åŠ é”®å€¼å¯¹åˆ™å–å†³äºè°·æ­Œæµè§ˆå™¨å¯¹æ”¹ç±»å‹å†…å­˜åˆ†é…çš„å·¥ç¨‹çº§åˆ«çš„å®ç°ï¼Œä¸åŒçš„æµè§ˆå™¨æƒ…å†µä¸åŒï¼Œ**ä½†æ˜¯åœ¨å›ºå®šå†…å­˜çš„æƒ…å†µä¸‹ï¼Œ`map`å¤§çº¦å¯ä»¥æ¯”`object`å¤šå­˜å‚¨50%çš„é”®å€¼å¯¹**
+ æ’å…¥æ€§èƒ½

  å¯¹äºè¿™ä¸¤ä¸ªç±»å‹è€Œè¨€ï¼Œæ’å…¥é€Ÿåº¦å¹¶ä¸ä¼šéšç€é”®å€¼å¯¹æ•°é‡è€Œçº¿æ€§å¢åŠ ï¼Œå¦‚æœä»£ç æ¶‰åŠå¤§é‡çš„æ’å…¥æ“ä½œï¼Œæ˜¾ç„¶`map`çš„æ•ˆæœæ›´ä½³ã€‚
+ æŸ¥æ‰¾é€Ÿåº¦

  åœ¨æŠŠ`object`å½“æˆæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å¼•æ“ä¼šå¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œè€Œ`map`åˆ™ä¸ä¼šã€‚å¯¹äºè¿™ä¸¤ä¸ªç±»å‹è€Œè¨€ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¹¶ä¸ä¼šéšç€é”®å€¼å¯¹æ•°é‡å¢åŠ è€Œçº¿æ€§å¢åŠ ã€‚å¦‚æœä»£ç æ¶‰åŠå¤§é‡çš„æŸ¥æ‰¾æ“ä½œï¼Œ`object`æ›´å¥½ä¸€äº›
+ åˆ é™¤æ€§èƒ½

  ä½¿ç”¨`delete`åˆ é™¤`object`å±æ€§ä¸€ç›´ä»¥æ¥éƒ½é¥±å—è¯Ÿç—…ï¼Œå¯¹äº`map`æ¥è¯´`delete()`æ“ä½œéƒ½é€¼æ’å…¥å’ŒæŸ¥æ‰¾æ›´å¿«ã€‚å¦‚æœä»£ç æ¶‰åŠå¤§é‡çš„åˆ é™¤æ“ä½œï¼Œæ˜¾ç„¶`map`æ›´é€‚åˆ

## WeakMap

`WeakMap`æ˜¯`Map`çš„å…„å¼Ÿç±»å‹ï¼Œå…¶Apiä¹Ÿæ˜¯Mapçš„å­é›†ã€‚`WeakMap`ä¸­çš„`Weak`æŒ‡ä»£çš„æ˜¯JavaScriptæ¥åŠå›æ”¶ç¨‹åºå¯¹å¾…â€œå¼±æ˜ å°„â€ä¸­é”®çš„æ–¹å¼

### åŸºæœ¬APi

ä¸`Map`åŸºæœ¬ç›¸ä¼¼ï¼Œ**ä½†æ˜¯è¦æ³¨æ„ï¼Œ`WeakMap`ä¸­çš„é”®åªèƒ½æ˜¯`Object`æˆ–è€…ç»§æ‰¿è‡ª`Object`çš„ç±»å‹**

```js
const key1 = {id: 1},
      key2 = {id: 2},
      key3 = {id: 3};
// ä½¿ç”¨åµŒå¥—æ•°ç»„åˆå§‹åŒ–å¼±æ˜ å°„
const wm1 = new WeakMap([
  [key1, "val1"],
  [key2, "val2"],
  [key3, "val3"]
]);
alert(wm.get(key1));  // val2
alert(wm.get(key2));  // val2
alert(wm.get(key3));  // val3

// åˆå§‹åŒ–æ˜¯å…¨æœ‰æˆ–è€…å…¨æ— çš„æ“ä½œï¼Œåªè¦æœ‰ä¸€ä¸ªé”®æ— æ•ˆå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¯¼è‡´åˆå§‹åŒ–å¤±è´¥
const wm2 = new WeakMap([
  [key1, "val1"],
  ["BADKEY", "val2"],
  [key3, "val3"]
]);
// TypeError: Invalid value used as WeakMap key
typeof wm2;
// ReferenceError: wm2 is not defined

//åŸå§‹å€¼å¯ä»¥å…ˆåŒ…è£…æˆå¯¹è±¡ï¼Œåœ¨ç”¨é”®
const stringKey = new String("key1");
const wm3 = new WeakMap([
  stringKey, "val1"
]);
alert(wm3.get(stringKey));  // "val1"

```

åˆå§‹åŒ–ä¹‹åå¯ä»¥ä½¿ç”¨`set`å†æ·»åŠ é”®å€¼å¯¹ï¼Œå¯ä»¥ä½¿ç”¨`get()`å’Œ`has()`æŸ¥è¯¢ï¼Œä½¿ç”¨`delete()`åˆ é™¤

```js
const wm = new WeakMap();

const key1 = {id: 1},
      key2 = {id: 2};

alert(wm.has(key1));  // false
alert(wm.get(key1));  // undefined

wm.set(key1, "Matt")
  .set(key2, "Frisbie");

alert(wm.has(key1));  // true
alert(wm.get(key1));  // Matt

wm.delete(key1);  

alert(wm.has(key1));  // false 
alert(wm.has(key2));  // true 

```

`set`æ–¹æ³•è¿”å›å¼±æ˜ å°„å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨é“¾å¼æ“ä½œ,åˆå§‹åŒ–äº¦æ˜¯å¦‚æ­¤

### ä½¿ç”¨å¼±æ˜ å°„

#### ç§æœ‰å˜é‡

æ ¸å¿ƒï¼šç§æœ‰å˜é‡å­˜å‚¨åœ¨å¼±æ˜ å°„ä¸­ï¼Œä»¥å¯¹è±¡å®ä¾‹ä¸ºé”®ï¼Œç§æœ‰æˆå‘˜çš„å­—å…¸ä¸ºå€¼

```js
const User = (() => {
  const wm = new WeakMap();

  class User {
    constructor(id) {
      this.idProperty = Symbol('id');
      this.setId(id);
    }

    setPrivate(property, value) {
      const privateMembers = wm.get(this) || {};
      privateMembers[property] = value;
      wm.set(this, privateMembers);
    }

    getPrivate(property) {
      return wm.get(this)[property];
    }

    setId(id) {
      this.setPrivate(this.idProperty, id);
    }

    getId(id) {
      return this.getPrivate(this.idProperty);
    }
  }
  return User;
})();

const user = new User(123);
alert(user.getId());  // 123
user.setId(456);
alert(user.getId());  // 456 
```

#### DOMèŠ‚ç‚¹å…ƒæ•°æ®

å› ä¸º`WeakMap`å¹¶ä¸ä¼šå¦¨ç¢åƒåœ¾å›æ”¶ï¼Œç´¢å¼•éå¸¸é€‚åˆä¿å­˜å…ƒæ•°æ®ã€‚ä¸¾ä¸ªğŸŒ°ï¼š

```js
const m = new Map()
const loginButton = document.querySelector('#login');
//ç»™èŠ‚ç‚¹å…³è”ä¸€äº›å…ƒæ•°æ®
m.set(loginButton,{disabled:true})
```
